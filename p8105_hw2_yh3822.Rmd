---
title: "p8105_hw2_yh3822"
output: github_document
date: "2024-10-01"
---

```{r set up, warning=FALSE, message=FALSE}
library(tidyverse)
library(readxl)
library(dplyr)
```



## Problem 1



```{r, warning=FALSE, message=FALSE}
nyc_transit_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, ada) %>%
  mutate(entry = case_match(entry, "YES" ~ TRUE, "NO" ~ FALSE))
```


This dataset describes the information related to each entrance and exit for each subway station in NYC, and it contains `r ncol(nyc_transit_df)` variables, which are line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, and ada. To clean up the data, I first made all the variable names lowercase, then filtered from there the variables I needed to use, removed the unnecessary ones, and finally converted the character variable â€œentry" to a logical variable. The dimension of this dataset is `r nrow(nyc_transit_df)` rows * `r ncol(nyc_transit_df)` columns. I think these data are tidy.


```{r}
distinct_stations = nyc_transit_df %>%
  distinct(station_name, line)
```

There are `r nrow(distinct_stations)` distinct stations.


```{r}
ada_stations = nyc_transit_df %>%
  filter(ada == TRUE) %>%
  distinct(station_name, line)
```

There are `r  nrow(ada_stations)` stations are ADA compliant.


```{r}
no_vending_entry = nyc_transit_df %>%
  filter(vending == "NO" & entry == TRUE) %>%
  distinct(station_name, line)
```

There are `r (nrow(no_vending_entry)/nrow(distinct_stations))*100` percent of station entrances / exits without vending allow entrance.


```{r}
nyc_transit_df = nyc_transit_df %>%
  mutate(across(starts_with("route"), as.character))

nyc_transit_df_tidy = nyc_transit_df %>%
  pivot_longer(cols = starts_with("route"),
               names_to = "route_number",   
               values_to = "route_name",    
               values_drop_na = TRUE)
```


```{r}
a_train_stations = nyc_transit_df_tidy %>%
  filter(route_name == "A") %>%
  distinct(station_name, line)
```

There are `r  nrow(a_train_stations)` distinct stations that served A train.


```{r}
ada_a_train_stations = nyc_transit_df_tidy %>%
  filter(route_name == "A", ada == TRUE) %>%
  distinct(station_name, line)
```

There are `r  nrow(ada_a_train_stations)` distinct stations that served A train are ADA compliant.


## Problem 2

```{r, warning=FALSE, message=FALSE}
mr_trash_wheel_df = 
  read_xlsx("./data/202309 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", skip = 1) %>%
  janitor::clean_names() %>%
  select(-homes_powered, -x15, -x16) %>%
  rename(dumpster_number = dumpster) %>%
  filter(!is.na(dumpster_number)) %>%
  mutate(sports_balls = as.integer(round(sports_balls, 0)))
```



```{r, warning=FALSE, message=FALSE}
professor_trash_wheel_df = 
  read_xlsx("./data/202309 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1) %>%
  janitor::clean_names() %>%
  select(-homes_powered) %>%
  rename(dumpster_number = dumpster) %>%
  filter(!is.na(dumpster_number))
```

